<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://yawnston.github.io/sparql2graphql/schema/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Schema Creation - SPARQL2GraphQL</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Schema Creation";
        var mkdocs_page_input_path = "schema.md";
        var mkdocs_page_url = "/sparql2graphql/schema/";
      </script>
<script defer="" src="../js/jquery-3.6.0.min.js"></script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="../pdf/documentation.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> SPARQL2GraphQL
        </a>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
</li>
</ul>
<p class="caption"><span class="caption-text">How it works</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../observation/">Observation</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_parsing/">Parsing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing/">Postprocessing</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="./">Schema Creation</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../querying/">Querying</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_checkpointing/">Model Checkpointing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hot_reloading/">Hot Reloading</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../editing_documentation/">Editing documentation</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">SPARQL2GraphQL</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a alt="Docs" class="icon icon-home" href=".."></a> »</li>
<li>How it works »</li><li>Schema Creation</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/yawnston/sparql2graphql/edit/master/docs/schema.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="schema-creation">Schema Creation</h1>
<p>Schema creation occurs after <a href="../postprocessing/">postprocessing</a>,
at which point the data model has been finalized in the form of
descriptors.</p>
<p>This creation is the purpose of the <code>createSchema</code> function in
<code>src/api/schema.ts</code>. It uses the descriptors to produce a complete
GraphQL schema in the form of a <code>NexusGraphQLSchema</code> (from the
<a href="https://nexusjs.org/">GraphQL Nexus</a> library).</p>
<p>Normally, a schema-first approach is used for modeling GraphQL APIs,
meaning developers would first write the GraphQL schema using a schema
declaration language, and they would then build their data model
to fit that schema. However, automatically generating a schema
in the GraphQL schema language is quite cumbersome and involves
a lot of string manipulation.</p>
<p>Therefore SPARQL2GraphQL uses <a href="https://nexusjs.org/">GraphQL Nexus</a>
as a way to define the GraphQL schema. GraphQL Nexus is a library which
facilitates code-first, declarative schema declarations. This means that
defining the GraphQL schema is a matter of converting each <code>ClassDescriptor</code>
into a type definition in the GraphQL schema, and using
its related descriptors to definte the properties of that type.</p>
<p>Information like the number of instances is stored in the type
and property descriptions to aid developers in exploring the dataset.</p>
<h2 id="schema-specifics">Schema specifics</h2>
<h3 id="classes">Classes</h3>
<p>All classes observed in the dataset have a corresponding type created
in the GraphQL schema, and this type is always queryable from the root
query.</p>
<p>Types in the root query support the following arguments:</p>
<ul>
<li>sort: takes either <code>ASC</code> or <code>DESC</code>, will ensure the ordering of results.
Class instances are sorted by their IRI.</li>
<li>limit: do not return more than <code>limit</code> results</li>
<li>offset: skip the first <code>offset</code> instances</li>
<li>filter: given an IRI, only return the instance with this IRI</li>
</ul>
<h3 id="attributes">Attributes</h3>
<p>Attributes are represented as fields on the source type.
Strings are mapped to string fields, ints are mapped to int fields,
booleans are mapped to boolean fields and lang strings (strings which
are tagged with a language in the RDF dataset) are mapped to objects
containing the respective languages as fields.</p>
<p>Other types are mapped to string fields by default.</p>
<p>Attribute fields except for language strings and booleans support <code>sort</code>,
<code>limit</code> and <code>offset</code> arguments. For booleans these arguments do not make sense.
They may be implemented for language strings in the future.</p>
<h3 id="associations">Associations</h3>
<p>Associations are represented as fields on the source type,
with the target type being one of the following:</p>
<ul>
<li>The target type if the associaton only has a single target type</li>
<li>A newly created union type joining all target types of the associaiton
in case the association has multiple target types.</li>
</ul>
<p>Association fields support <code>sort</code>, <code>limit</code>, <code>offset</code> and <code>filter</code>
arguments.</p>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../postprocessing/" title="Postprocessing"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../querying/" title="Querying">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span>
<a class="fa fa-github" href="https://github.com/yawnston/sparql2graphql" style="color: #fcfcfc"> GitHub</a>
</span>
<span><a href="../postprocessing/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../querying/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme_extra.js"></script>
<script defer="" src="../js/theme.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
