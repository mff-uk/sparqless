<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://mff-uk.github.io/sparqless/usage/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Usage - SPARQLess</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Usage";
        var mkdocs_page_input_path = "usage.md";
        var mkdocs_page_url = "/sparqless/usage/";
      </script>
<script defer="" src="../js/jquery-3.6.0.min.js"></script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="../pdf/documentation.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> SPARQLess
        </a>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../docker/">Docker</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="./">Usage</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
</li>
</ul>
<p class="caption"><span class="caption-text">How it works</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../observation/">Observation</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_parsing/">Parsing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing/">Postprocessing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../schema/">Schema Creation</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../querying/">Querying</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_checkpointing/">Model Checkpointing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hot_reloading/">Hot Reloading</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../editing_documentation/">Editing documentation</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">SPARQLess</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a alt="Docs" class="icon icon-home" href=".."></a> »</li>
<li>User Guide »</li><li>Usage</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/mff-uk/sparqless/edit/master/docs/usage.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="usage-guide">Usage guide</h1>
<p>This page will explain how to set up SPARQLess for a given SPARQL endpoint, step-by-step.
If you want to use SPARQLess as a black box, you may prefer to use
the Docker image instead, as described <a href="../docker/">here</a>.</p>
<h2 id="installing-dependencies">Installing dependencies</h2>
<p>The project is written in TypeScript and uses Node.js as its runtime.</p>
<p>You will need to have the following installed before you proceed with usage:</p>
<ul>
<li>Node 16.13.0 (Gallium LTS) - easily managed with <a href="https://github.com/nvm-sh/nvm">nvm</a></li>
<li>npm</li>
</ul>
<p>Once you have installed them, run <code>npm install</code> in the project root directory to install
all required dependencies with npm.</p>
<h2 id="library-interface">Library interface</h2>
<p>The main functionality is encapsulated by the <code>SPARQLess</code> class in <code>src/api/library.ts</code>.
This class contains functions for the main tasks users may want to perform.</p>
<p>Most notably, the <code>buildSchemaAndRunEndpoint</code> functions is provided for users
who want the least configuration necessary. It is enough to simply set up a <code>Config</code>
as shown in the next section, and run SPARQLess like so:</p>
<pre><code class="language-ts">const config = new SPARQLessConfigBuilder()
    .sparqlEndpoint('https://data.gov.cz/sparql')
    .build();

const sparqless = new SPARQLess();

// This method returns a Promise, so you should await it
// if you want to do something after the server has started.
sparqless.buildSchemaAndRunEndpoint(config);
</code></pre>
<p>The <code>SPARQLess</code> class also contains other functions which perform
smaller parts of the whole algorithm, which you may want to use if your
task is more complex than <em>convert this SPARQL endpoint into a GraphQL endpoint</em>.
For example, the <code>observeAndBuildSchema</code> function performs all the steps up to
and including schema building, meaning one could use it to simply save the
GraphQL schema into a file and do something else with it, rather than
starting a GraphQL endpoint.</p>
<h2 id="edit-configuration">Edit configuration</h2>
<p>There is one required configuration step before you run the library - configuring
the SPARQL endpoint you want to run. This is done by creating a <code>Config</code> object,
which you will pass to SPARQLess functions. There is a pre-defined list of known
online and working endpoints in <code>src/observation/endpoints.ts</code> in case you just want
to try the project without having a specific SPARQL endpoint in mind, but you can
easily define your own.</p>
<p>A very basic configuration can look like this:</p>
<pre><code class="language-ts">const config = new SPARQLessConfigBuilder()
    .sparqlEndpoint('https://data.gov.cz/sparql')
    .build();
</code></pre>
<p>As you can see, the only required configuration value when using the builder
is specifying the SPARQL endpoint.
This example uses the <code>SPARQLessConfigBuilder</code> to build the configuration.
You may of course create the <code>Config</code> object manually, but using the builder
lets you make use of pre-defined sane defaults, allowing you to only
specify the configuration values you care about.</p>
<p>There are other configuration values which you are free to modify, but they have
sensible defaults in case you just want to get started. If you want to find out
more about additional configuration options, you can refer to the
<a href="../configuration/">configuration guide</a>. Alternatively, you can examine
their definition in the code, where they are also documented.</p>
<h2 id="run-it">Run it</h2>
<p>Putting together the above code examples is enough to start a SPARQLess instance,
which will observe the configured SPARQL endpoint and convert it to a GraphQL one.
Alternatively, if you are running SPARQLess from this repository,
you can run <code>npm start</code>, which will run <code>src/main.ts</code>, which is an entrypoint
meant for starting the server from withing this repository.
In that case, edit your configuration there.</p>
<p>In the logs, you will see that it will first run some observations on the target
endpoint to collect information about its schema and the data contained within.
This may take a while, especially for large datasets, depending on the configuration
parameters used. As an example, the <a href="https://data.gov.cz/english/">CZ Government open data</a> endpoint
shown in the configuraiton above takes under 10 minutes to have a fully functional
GraphQL instance running.</p>
<p>After observation is finished, you will see that a fully functional GraphQL interface is
available for you to explore and query at the configured port
(<a href="http://localhost:4000">localhost:4000</a> by default).</p>
<h2 id="explore-the-schema">Explore the schema</h2>
<p>When you open the GraphQL interface in your browser, you will see an interface
provided by Apollo Server. It allows you to explore the schema including all of the available
classes, as well as their properties, relations, how many times they occur in the dataset
and other metadata.</p>
<p><img alt="GraphQL interface" src="../img/interface.png"/></p>
<p>The interface also allows you to interactively build and execute queries against the endpoint.</p>
<h2 id="hot-reloading">Hot reloading</h2>
<p>You may notice that with the default configuration, another round of observation
will start right after the GraphQL server is created.</p>
<p>This is <a href="../hot_reloading/">hot reloading</a> in action. Because fully observing the entire
dataset in the endpoint may take a long time, the initial observations are limited
by the default configuration - observation will only count up to 1000 occurences
for each property in the dataset.</p>
<p>After the server has started, it's fully available and functional for purposes of
schema exploration and querying. In the background, SPARQLess continues
to make more detailed observations, and seamlessly updating the GraphQL
schema in the GraphQL endpoint.</p>
<p>You can read more about hot reloading <a href="../hot_reloading/">here</a>.</p>
<h2 id="query-the-endpoint">Query the endpoint</h2>
<p>If you are not yet familiar with how to compose GraphQL queries, you can learn more
about GraphQL <a href="https://graphql.org/learn/">here</a>.</p>
<p>You can use the interface to query the data, either writing the query yourself,
or using the graphical query editor to compose the query.</p>
<p><img alt="GraphQL querying" src="../img/querying.png"/></p>
<p><strong>NOTE:</strong> be careful running queries which have an unlimited result size!
If your SPARQL endpoint contains a large dataset, the query could either
run for a <em>very</em> long time, or it might just fail due to a timeout.
You should use the <code>limit</code> and <code>offset</code> parameters provided in each query
field as shown in the image above.</p>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../docker/" title="Docker"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../configuration/" title="Configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span>
<a class="fa fa-github" href="https://github.com/mff-uk/sparqless" style="color: #fcfcfc"> GitHub</a>
</span>
<span><a href="../docker/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../configuration/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme_extra.js"></script>
<script defer="" src="../js/theme.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
