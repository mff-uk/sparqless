<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="https://yawnston.github.io/sparql2graphql/model_parsing/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Parsing - SPARQL2GraphQL</title>
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Parsing";
        var mkdocs_page_input_path = "model_parsing.md";
        var mkdocs_page_url = "/sparql2graphql/model_parsing/";
      </script>
<script defer="" src="../js/jquery-3.6.0.min.js"></script>
<!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="../pdf/documentation.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> SPARQL2GraphQL
        </a>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/">Usage</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
</li>
</ul>
<p class="caption"><span class="caption-text">How it works</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../observation/">Observation</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="./">Parsing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing/">Postprocessing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../schema/">Schema Creation</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../querying/">Querying</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model_checkpointing/">Model Checkpointing</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hot_reloading/">Hot Reloading</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/">Development</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../editing_documentation/">Editing documentation</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">SPARQL2GraphQL</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a alt="Docs" class="icon icon-home" href=".."></a> »</li>
<li>How it works »</li><li>Parsing</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/yawnston/sparql2graphql/edit/master/docs/model_parsing.md"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="parsing">Parsing</h1>
<p>Observations made about a SPARQL endpoint are then parsed by
the <code>ObservationParser</code> class. It contains an implementation of an algorithm
which converts RDF observations into <strong>descriptors</strong>. <strong>Descriptors</strong> are
plain JavaScript objects which describe the model of the data in the SPARQL
endpoint. They are the stepping stone between the RDF observations,
and creation of the GraphQL schema.</p>
<p>This parsing algorithm is not the only possible parsing algorithm for the
observations we are collecting. Observations are simply pieces of information
to be interpreted, and there are many ways of interpreting that information.
The parsing algorithm implemented is simply one which uses all of the observations
SPARQL2GraphQL is currently collecting efficiently. There are currently
no plans to let library users specify custom parsing algorithms, but should
the need arise, the library design is modular enough to allow it.</p>
<h2 id="descriptors">Descriptors</h2>
<p>This section contains a more thorough explanation of what each descriptor
means, and what it says about the underlying data. The following is a class
diagram showing all of the currently used descriptors:</p>
<p><img alt="Descriptors diagram" src="../img/descriptors_diagram.png"/></p>
<h3 id="resourcedescriptor">ResourceDescriptor</h3>
<p>Describes any RDF resource which is identified by
an IRI, i.e. classes and properties. This descriptor also has a name field,
which is meant to contain a GraphQL-compatible, human-readable name,
meaning a string only consisting of characters <code>[_a-zA-Z0-9]</code>.
This name is used as the GraphQL identifier for this resource.
After all, it's much easier for humans to read and reason about
<code>Label</code> than <code>http://www.w3.org/2008/05/skos-xl#Label</code>.</p>
<pre><code class="language-ts">interface ResourceDescriptor {
    iri: string;
    name: string;
}
</code></pre>
<p>This descriptor is extended by all other descriptors.</p>
<h3 id="classdescriptor">ClassDescriptor</h3>
<p>Describes a single class present in the dataset.</p>
<pre><code class="language-ts">interface ClassDescriptor extends ResourceDescriptor {
    numberOfInstances: number;
    attributes: AttributeDescriptor[];
    associations: AssociationDescriptor[];
}
</code></pre>
<p>For example, if the dataset contains 5 dogs and 10 cats,
we would have the following class descriptors:</p>
<pre><code class="language-ts">[
    {
        iri: 'http://example.com/Dog',
        name: 'Dog',
        numberOfInstances: 5,
        attributes: [],
        associations: [],
    },
    {
        iri: 'http://example.com/Cat',
        name: 'Cat',
        numberOfInstances: 10,
        attributes: [],
        associations: [],
    }
]
</code></pre>
<h3 id="propertydescriptor">PropertyDescriptor</h3>
<p>Describes a property of a class. A property is any relation
in the dataset where the subject is a class. This descriptor is
not instantiated on its own, rather it is always as an instance
of an <code>AssociationDescriptor</code> or an <code>AttributeDescriptor</code>.</p>
<pre><code class="language-ts">interface PropertyDescriptor extends ResourceDescriptor {
    count: number;
    isArray: boolean;
}
</code></pre>
<h3 id="associationdescriptor">AssociationDescriptor</h3>
<p>A special case of a property where its domain is another class.
If an association has multiple target classes, its range is their
union.</p>
<pre><code class="language-ts">interface AssociationDescriptor extends PropertyDescriptor {
    targetClasses: ClassDescriptor[];
}
</code></pre>
<p>In our cats and dogs example, let's say each cat has a friend among the dogs.
That would be modelled like so:</p>
<pre><code class="language-ts">{
    iri: 'http://example.com/Cat',
    name: 'Cat',
    numberOfInstances: 10,
    attributes: [],
    associations: [{
        iri: 'http://example.com/friend',
        name: 'friend',
        count: 10,
        isArray: false,
        targetClasses: [{
            iri: 'http://example.com/Dog',
            name: 'Dog',
            numberOfInstances: 5,
            attributes: [],
            associations: [],
        }],
    }],
}
</code></pre>
<h3 id="attributedescriptor">AttributeDescriptor</h3>
<p>A special case of a property where its domain is a literal,
i.e. a primitive value like a string or an integer.</p>
<pre><code class="language-ts">interface AttributeDescriptor extends PropertyDescriptor {
    types: string[];
    languages: string[];
}
</code></pre>
<p>The <code>types</code> array contains a list of types in this attribute's range.
If the <code>types</code> array contains a language string type, then the <code>languages</code>
array will hold a list of available languages for this language string.</p>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../observation/" title="Observation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../postprocessing/" title="Postprocessing">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span>
<a class="fa fa-github" href="https://github.com/yawnston/sparql2graphql" style="color: #fcfcfc"> GitHub</a>
</span>
<span><a href="../observation/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../postprocessing/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme_extra.js"></script>
<script defer="" src="../js/theme.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
